<div class="container">
<mat-card class="card">
    <mat-card-title>
        <span *ngIf="mode == 'add'">Ajouter un utilisateur</span>
        <span *ngIf="mode == 'update'">Modifier un utilisateur</span>
    </mat-card-title>
    <mat-card-subtitle>Entrer les informations</mat-card-subtitle>
    <mat-card-content>
        <form class="form" [formGroup]="formGroup" (ngSubmit)="onSubmit()">

            <mat-form-field class="form__full-width" appearance="fill">
                <mat-label>Nom</mat-label>
                <input type="text" formControlName="username" matInput #username maxlength="64" placeholder="Votre nom">
                <mat-hint align="end">{{username.value.length}} / 64</mat-hint>
                <mat-error *ngFor="let validation of validationMessages.name">
                    <mat-error class="form__error" *ngIf="formGroup.get('username')!.hasError(validation.type)">{{validation.message}}</mat-error>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="form__full-width" appearance="fill">
                <mat-label>E-mail</mat-label>
                <input type="email" formControlName="email" matInput #email maxlength="128" placeholder="name@gmail.com">
                <mat-hint align="end">{{email.value.length}} / 128</mat-hint>
                <mat-error *ngFor="let validation of validationMessages.email">
                    <mat-error class="form__error" *ngIf="formGroup.get('email')!.hasError(validation.type)">{{validation.message}}</mat-error>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="form__full-width" appearance="fill">
                <mat-label>Mot de Passe</mat-label>
                <input type="password" formControlName="password" matInput #password maxlength="64" placeholder="Mot de passe">
                <mat-hint align="end">{{password.value.length}} / 64</mat-hint>
                <mat-error *ngFor="let validation of validationMessages.password">
                    <mat-error class="form__error" *ngIf="formGroup.get('password')!.hasError(validation.type)">{{validation.message}}</mat-error>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="form__full-width" appearance="fill">
                <mat-label>Confirmer Mot de Passe</mat-label>
                <input type="password" formControlName="confirmPassword" matInput #confirmPassword maxlength="64" placeholder="Mot de passe">
                <mat-hint align="end">{{confirmPassword.value.length}} / 64</mat-hint>
                <mat-error *ngFor="let validation of validationMessages.confirmPassword">
                    <mat-error class="form__error" *ngIf="formGroup.get('confirmPassword')!.hasError(validation.type)">{{validation.message}}</mat-error>
                </mat-error>
            </mat-form-field>

            <mat-divider inset></mat-divider>

            <mat-card-actions>
                <button type="submit" [disabled]="formGroup.invalid" mat-flat-button color="primary">
                    <span *ngIf="mode == 'add'">Ajouter</span>
                    <span *ngIf="mode == 'update'">Modifier</span>
                </button>
                <button type="reset" (click)="cancel()" mat-flat-button color="secondary">Annuler</button>
            </mat-card-actions>
        </form>          
    </mat-card-content>
  </mat-card>
</div>
